{"ast":null,"code":"import create from \"zustand\";\nconst initialState = {\n  todos: [],\n  todoID: null,\n  isLoading: false,\n  error: null\n};\n\nconst todoMethods = (set, get) => {\n  const getData = async _ref => {\n    let {\n      path,\n      method,\n      body\n    } = _ref;\n    const url = \"https://631327b3b466aa9b0393e72f.mockapi.io/\";\n    set({\n      isLoading: true\n    });\n\n    try {\n      const response = await fetch(`${url}${path}`, {\n        method,\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        ...(body ? {\n          body: JSON.stringify(body)\n        } : {})\n      });\n      set({\n        isLoading: false\n      });\n      set({\n        error: null\n      });\n      return response.json();\n    } catch (error) {\n      set({\n        isLoading: false\n      });\n      set({\n        error\n      });\n    }\n  };\n\n  return {\n    getTodos: async () => {\n      await getData({\n        path: \"/todos\",\n        method: \"GET\"\n      }).then(todos => {\n        set({\n          todos\n        });\n      });\n    },\n    addNewTodo: async newTodo => {\n      await getData({\n        path: \"/todos\",\n        method: \"POST\",\n        body: newTodo\n      }).then(() => {\n        get().getTodos();\n      });\n    },\n    deleteTodo: async todoID => {\n      await getData({\n        path: `/todos/${todoID}`,\n        method: \"DELETE\"\n      }).then(() => {\n        get().getTodos();\n      });\n    },\n    completeTodo: async (todoID, completed) => {\n      await getData({\n        path: `/todos/${todoID}`,\n        method: \"PUT\",\n        body: {\n          isCompleted: !completed\n        }\n      }).then(() => {});\n    },\n    editTodo: async text => {\n      await getData({\n        path: `/todos/${get().todoID}`,\n        method: \"PUT\",\n        body: {\n          content: text\n        }\n      }).then(() => {\n        get().getTodos();\n      });\n    }\n  };\n};\n\nexport const todoStore = create((set, get) => ({ ...initialState,\n  ...todoMethods(set, get)\n}));","map":{"version":3,"names":["create","initialState","todos","todoID","isLoading","error","todoMethods","set","get","getData","path","method","body","url","response","fetch","headers","JSON","stringify","json","getTodos","then","addNewTodo","newTodo","deleteTodo","completeTodo","completed","isCompleted","editTodo","text","content","todoStore"],"sources":["E:/VSCODE PROJECTS/react-practicum/src/context/todoContext.js"],"sourcesContent":["import create from \"zustand\"\r\n\r\nconst initialState = {\r\n  todos: [],\r\n  todoID: null,\r\n  isLoading: false,\r\n  error: null,\r\n}\r\nconst todoMethods = (set, get) => {\r\n  const getData = async ({ path, method, body }) => {\r\n    const url = \"https://631327b3b466aa9b0393e72f.mockapi.io/\"\r\n    set({ isLoading: true })\r\n\r\n    try {\r\n      const response = await fetch(`${url}${path}`, {\r\n        method,\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        ...(body ? { body: JSON.stringify(body) } : {}),\r\n      })\r\n      set({ isLoading: false })\r\n      set({ error: null })\r\n\r\n      return response.json()\r\n    } catch (error) {\r\n      set({ isLoading: false })\r\n      set({ error })\r\n    }\r\n  }\r\n\r\n  return {\r\n    getTodos: async () => {\r\n      await getData({\r\n        path: \"/todos\",\r\n        method: \"GET\",\r\n      }).then((todos) => {\r\n        set({ todos })\r\n      })\r\n    },\r\n    addNewTodo: async (newTodo) => {\r\n      await getData({\r\n        path: \"/todos\",\r\n        method: \"POST\",\r\n        body: newTodo,\r\n      }).then(() => {\r\n        get().getTodos()\r\n      })\r\n    },\r\n    deleteTodo: async (todoID) => {\r\n      await getData({\r\n        path: `/todos/${todoID}`,\r\n        method: \"DELETE\",\r\n      }).then(() => {\r\n        get().getTodos()\r\n      })\r\n    },\r\n    completeTodo: async (todoID, completed) => {\r\n      await getData({\r\n        path: `/todos/${todoID}`,\r\n        method: \"PUT\",\r\n        body: { isCompleted: !completed },\r\n      }).then(() => {})\r\n    },\r\n    editTodo: async (text) => {\r\n      await getData({\r\n        path: `/todos/${get().todoID}`,\r\n        method: \"PUT\",\r\n        body: { content: text },\r\n      }).then(() => {\r\n        get().getTodos()\r\n      })\r\n    },\r\n  }\r\n}\r\n\r\nexport const todoStore = create((set, get) => ({\r\n  ...initialState,\r\n  ...todoMethods(set, get),\r\n}))\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}